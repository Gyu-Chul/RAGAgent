# **Git Action 실행 서비스 (Git Service)**

Python 코드를 통해 Git 저장소와 관련된 다양한 작업을 자동화하는 서비스입니다. 원격 저장소를 로컬에 복제(clone), 최신 변경사항을 반영(pull), 상태를 확인하고, 로컬 저장소를 삭제하는 등의 기능을 프로그래밍 방식으로 처리할 수 있습니다.

## **주요 기능 및 구성 요소**

이 서비스는 세 가지 핵심 구성 요소로 이루어져 있습니다.

### **1\. GitCommandRunner: Git 명령어 실행기**

* **역할**: git clone, git pull 등 실제 Git 명령어를 시스템에서 안전하게 실행하고 결과를 반환합니다.  
* **주요 기능**:  
  * **안정적인 명령어 실행**: subprocess 모듈을 사용하여 모든 Git 명령어를 실행합니다.  
  * **오류 처리**: 명령어 실행이 지정된 시간을 초과하면 타임아웃 오류를 발생시키고, 그 외 실행 실패 시 명확한 오류 메시지를 반환하여 시스템 안정성을 높입니다.  
  * **결과 반환**: 명령어 실행 결과를 표준 출력(stdout)과 표준 에러(stderr)로 나누어 상세하게 제공합니다.

### **2\. RepositoryManager: 로컬 저장소 관리자**

* **역할**: 로컬 파일 시스템에 저장되는 Git 저장소의 경로를 관리하고, 폴더의 존재 여부를 확인하는 등 파일 시스템 관련 작업을 담당합니다.  
* **주요 기능**:  
  * **중앙화된 경로 관리**: 모든 Git 저장소가 repository/ 와 같은 특정 기본 폴더 하위에 일관되게 생성 및 관리되도록 보장합니다.  
  * **유효성 검사**: 저장소를 생성하기 전 이미 존재하는지 확인하거나, 특정 작업을 수행하기 전 저장소가 실제로 존재하는지 검증하여 중복 생성 및 예외를 방지합니다.

### **3\. GitService: 핵심 기능 제공자**

* **역할**: GitCommandRunner와 RepositoryManager를 조합하여, 개발자가 쉽게 사용할 수 있는 고급 API를 제공하는 메인 서비스입니다.  
* **주요 기능**:  
  * **clone\_repository()**: 원격 저장소 URL을 받아 로컬에 안전하게 복제합니다.  
  * **check\_commit\_status()**: 로컬 저장소의 현재 브랜치, 변경 사항 유무, 최신 커밋 정보 등을 조회합니다.  
  * **pull\_repository()**: 원격 저장소의 최신 내용을 가져와 로컬 저장소를 업데이트합니다.  
  * **delete\_repository()**: 로컬에 생성된 저장소 폴더를 깨끗하게 삭제합니다. (Windows의 읽기 전용 파일 문제 등도 처리)

## **동작 과정 (Workflow)**

1. 개발자가 **GitService** 의 인스턴스를 생성하고 clone\_repository("https://...") 와 같은 메서드를 호출합니다.  
2. **GitService** 는 먼저 **RepositoryManager** 에게 해당 저장소가 이미 로컬에 존재하는지 확인을 요청합니다.  
3. **RepositoryManager** 가 문제가 없다고 응답하면, **GitService** 는 **GitCommandRunner** 에게 git clone https://... 명령어를 실행하라고 지시합니다.  
4. **GitCommandRunner** 는 시스템에서 해당 명령어를 실행하고, 성공 여부와 결과(또는 오류 메시지)를 다시 **GitService** 에 반환합니다.  
5. **GitService** 는 최종 결과를 구조화된 데이터 객체(CloneResult)에 담아 개발자에게 반환하며 프로세스가 종료됩니다.